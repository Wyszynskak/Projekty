{
    "contents" : "#' Wskazniki widocznosci kandydata w GoogleNews\n#'\n#' Funkcja \\code{wybory_wsk_google} zlicza wskazniki\n#' widocznosci kandydatow na portalu informacyjnym GoogleNews - wiecej patrz\n#' funkcja wybory_pobierz_GoogleNews().\n#'\n#' @usage  wybory_wsk_GoogleNews(okres, wzor, typ=\"zwykly\", sciezka_do_folderu=getwd())\n#'\n#' @param sciezka_do_folderu sciezka do folderu, ktory zawiera podfolder GoogleNews (wynik dzialania funkcji wybory_pobierz_GoogleNews())\n#' @param okres okres, za ktory jest liczony wskaznik; mozliwosci: \"dzien\", \"tydzien\", \"miesiac\"\n#' @param wzor wzorzec do odczytu plikow odpowiadajacy danemu okresowi; mozliwosci: \"2015-XX-XX\", \"2015-(X|XX)\", \"2015-XX\"\n#' @param typ okresla typ wskaznika: \"zwykly\", \"sredni\"\n#'\n#' @details\n#' Sposob obliczania wskaznika \"sredniego\" wyswietlenia na Google:\n#'\n#' Zwraca sume wyswietlen danego nazwiska na portalu dla danego okresu czasu.\n#'\n#' @return Zwraca wyliczony wskaznik (24 elementowy wektor) dla danego okresu.\n#'\n#' @examples\n#' wybory_wsk_GoogleNews(\"dzien\", \"2015-03-23\")\n#' wybory_wsk_GoogleNews(\"tydzien\", \"2015-12\")\n#' wybory_wsk_GoogleNews(\"miesiac\", \"2015-03\")\n#' wybory_wsk_GoogleNews(\"dzien\", \"2015-03-23\", \"sredni\")\n#' wybory_wsk_GoogleNews(\"tydzien\", \"2015-12\", \"sredni\")\n#' wybory_wsk_GoogleNews(\"miesiac\", \"2015-04\", \"sredni\")\n#'\n#' @author Karolina Wyszynska\n#'\n\nwybory_wsk_GoogleNews <- function(okres, wzor, typ=\"zwykly\",\n                                  sciezka_do_folderu=getwd()){\n\n   #Zmieniamy scieżkę i sprawdzamy jakie mamy tam pliki\n   if(stri_sub(sciezka_do_folderu,-1)!=\"/\"){\n      sciezka <- paste0(sciezka_do_folderu,\"/GoogleNews\")\n   } else{\n      sciezka <- paste0(sciezka_do_folderu, \"GoogleNews\")\n   }\n\n   pliki <- list.files(sciezka, full.names=TRUE)\n\n   ktore <- character(0)\n   #Wybieramy pasujące do wzoru foldery\n   if (okres == \"dzien\"){\n      ktore <- which(stri_detect_regex(pliki, wzor))\n   } else if (okres == \"tydzien\"){\n      #zapamietujemy interesujący nas numer tygodnia\n      nr_tyg <- unlist(stri_extract_all_regex(wzor, \"(?<=-).+$\"))\n      #wyciągamy z plików informację, który tydzień opisują\n      daty <- unlist(stri_extract_first_regex(\n         list.files(sciezka,full.names=FALSE), \"(?<=News)[^ ]+\"))\n      daty <- as.POSIXlt(daty)\n      tygodnie <- ceiling((daty$yday + 4) / 7)\n      #wybieramy pasujące do wzoru foldery\n      ktore <- which(tygodnie == nr_tyg)\n   } else if (okres == \"miesiac\"){\n      #wybieramy pasujące do wzoru pliki i je wczytujemy\n      ktore <- which(stri_detect_regex(pliki, wzor))\n   }\n\n   #Analizujemy interesujące nas pliki\n   wskaznik <- numeric(length(slownik_fb_kandydaci))\n   names(wskaznik) <- slownik_fb_kandydaci\n   if(length(ktore) == 0){return(wskaznik)}\n\n   for(i in seq_along(ktore)){\n      wskaznik <- AnalizaPlik(pliki[ktore[i]]) + wskaznik\n   }\n\n   if(typ == \"sredni\"){\n      suma <- sum(wskaznik)\n      wskaznik <- wskaznik/suma\n   }\n\n   wskaznik\n\n}\n\n\n#Funkcja pomocnicza\nAnalizaPlik <- function(sciezka.plik){\n\n   #Funkcja obliczajaca wskaźnik dla jednego czasu odczytu zliczeń z serwisu Google\n   wystapienia <- character(0)\n   try(wystapienia <- read.table(sciezka.plik,h=TRUE,encoding=\"UTF-8\"), silent=TRUE)\n\n   wskaznik <- numeric(length(slownik_fb_kandydaci))\n   names(wskaznik) <- slownik_fb_kandydaci\n   if(length(wystapienia)==0) return(wskaznik)\n\n   #Poprawa struktury tabeli by spelniala wymagania wyjsciowego wektora\n   imiona <- names(wystapienia)\n\n   for(i in 1:ncol(wystapienia)){\n      ktory <- which(stri_detect_regex(slownik_fb_kandydaci, imiona[i]))\n      wskaznik[ktory] <- wystapienia[[i]]\n   }\n\n   wskaznik\n}\n",
    "created" : 1430662171724.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "96636956",
    "id" : "C539CFD",
    "lastKnownWriteTime" : 1430662112,
    "path" : "D:/Dokumenty/studia/8 semestr/R i Big Data/projekt - wybory/pakiet/wyborySmudaWyszynska/R/wybory_wsk_GoogleNews.R",
    "project_path" : "R/wybory_wsk_GoogleNews.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}